---
title: "多种依赖形式下动态库和静态库使用的不同"
subtitle: "编译与链接"
layout: post
author: "Peter Lau"
published: true
header-img: "img/post-bg-compiler.jpg"
header-style: text
tags:
  - Software engineering
---


若调用者代码使用A库，A库依赖静态库B和静态库C，当A分别编译生成动态库和静态库时。从调用者角度，编译链接使用的流程如下：

[![static and dynamic flow](https://mermaid.ink/img/pako:eNqVlMtu00AUhl_Fmqq7RIonMqFeIOXSki5YtSswi4nnTGzhm8Zjhaiq1AohoEJQVBTUBVK7QGRXVpUoFF6GOOEtsDNOnPSShlnNOfrOPzPnt88OMn0KSEfM8TumRbhQthuGpyRrdVXZEl0HQhmaDgnDBjAl9CNuQj0pU5jtOPoKqExjUAgF95-BvlJStcpaKwuLHZsKS8fB8ysqjt3ihHczCcZYGUpTCcbusVLpLomA-yaE4USiDBrTphKVlsoIvkvCj0QQick77jMN1qYKGCq0fJOC1AijVpuTwFJCQYRtPjHQ38_H8d7-4OIo7n2PT18b6Kkk00VtDqawfU_ZruXZqpqUxReHw5P9aoLrup43t1h8UFNnVTMia1wuUk-p0bcXw4_90d5LqXaDWCPFhj97o7MPU1hiWR9zxYaa8Ovjw49-xe--DI77t5A1SeaJjbkr1-aufAV9OIfWF6Hr6THNlB-8P4vffB2dvo17r_78OJdF0kWJg0evOUS7HnHHFg0O-v9rEV5sEZ5Vvc2iDbywKzU80xW8sCuzaB0vZzxe3nicNh4vY7wkZyxKE028jEXpaqb45vgBvw9T9tP54OBkdHm56LxNfM3jZEhVKVXCgJigtEB0ALyp8Vl9mE6x7DdVXMLbtlfkdtsSulaaTATJZB_KBHKASQYVkAvcJTZNJuVOWmEgYYELBtKTLQVGIkcYyPB2E5REwt_qeibSBY-ggLgfta1JEAWUCGjYJLmhi3RGnDDJBsR77Pt5DNQWPn8kR_N4Qu_-A-ETDtw?type=png)](https://mermaid.live/edit#pako:eNqVlMtu00AUhl_Fmqq7RIonMqFeIOXSki5YtSswi4nnTGzhm8Zjhaiq1AohoEJQVBTUBVK7QGRXVpUoFF6GOOEtsDNOnPSShlnNOfrOPzPnt88OMn0KSEfM8TumRbhQthuGpyRrdVXZEl0HQhmaDgnDBjAl9CNuQj0pU5jtOPoKqExjUAgF95-BvlJStcpaKwuLHZsKS8fB8ysqjt3ihHczCcZYGUpTCcbusVLpLomA-yaE4USiDBrTphKVlsoIvkvCj0QQick77jMN1qYKGCq0fJOC1AijVpuTwFJCQYRtPjHQ38_H8d7-4OIo7n2PT18b6Kkk00VtDqawfU_ZruXZqpqUxReHw5P9aoLrup43t1h8UFNnVTMia1wuUk-p0bcXw4_90d5LqXaDWCPFhj97o7MPU1hiWR9zxYaa8Ovjw49-xe--DI77t5A1SeaJjbkr1-aufAV9OIfWF6Hr6THNlB-8P4vffB2dvo17r_78OJdF0kWJg0evOUS7HnHHFg0O-v9rEV5sEZ5Vvc2iDbywKzU80xW8sCuzaB0vZzxe3nicNh4vY7wkZyxKE028jEXpaqb45vgBvw9T9tP54OBkdHm56LxNfM3jZEhVKVXCgJigtEB0ALyp8Vl9mE6x7DdVXMLbtlfkdtsSulaaTATJZB_KBHKASQYVkAvcJTZNJuVOWmEgYYELBtKTLQVGIkcYyPB2E5REwt_qeibSBY-ggLgfta1JEAWUCGjYJLmhi3RGnDDJBsR77Pt5DNQWPn8kR_N4Qu_-A-ETDtw)


若A使用形式为动态库，那么调用者在进行编译链接以及运行时，可以忽略静态库B和C；若A使用形式为静态库，那么调用者在进行编译连接时，同时需要链接静态库B和C。